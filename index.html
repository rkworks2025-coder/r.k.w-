<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>タイヤ点検アプリ（メモ順・コンパクト）</title>
<style>
  :root{ --pad:10px; --gap:8px; --radius:12px; --border:#e5e7eb; --bg:#fafafa; --brand:#2563eb; --muted:#667085;}
  *{ box-sizing:border-box; }
  body{ margin:0; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial; background:var(--bg); color:#111; }
  header{ position:sticky; top:0; background:#fff; border-bottom:1px solid var(--border); padding:8px var(--pad); display:flex; gap:8px; align-items:center; z-index:10;}
  header h1{ margin:0; font-size:15px; font-weight:700; }
  #now{ margin-left:auto; color:var(--muted); font-size:12px; }
  .wrap{ padding:var(--pad); }
  .card{ background:#fff; border:1px solid var(--border); border-radius:12px; padding:var(--pad); margin-bottom:var(--gap); }
  .title{ font-size:14px; font-weight:700; margin:0 0 6px; }
  label{ display:block; font-size:13px; color:#1f2937; margin:4px 0 4px; text-align:left; }
  input[type="text"],input[type="number"]{
    width:100%; border:1px solid var(--border); border-radius:10px; padding:8px 10px;
    font-size:16px; background:#fff; text-align:left;
  }
  /* 車両情報 */
  .veh-rows{ display:grid; gap:8px; }
  .veh-row2{ display:grid; grid-template-columns: minmax(120px,1fr) minmax(180px,2fr); gap:8px; }
  /* 規定圧は均等(1:1) */
  .std-row{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
  .hint{ color:var(--muted); font-size:11px; }
  /* タイヤ入力（左手親指前提で全左寄せ） */
  .tire-list{ display:grid; gap:6px; }
  .tire-row{ display:grid; grid-template-columns: 46px 1fr 1fr 1fr; gap:6px; align-items:end; }
  .lab{ font-weight:700; text-align:left; padding-bottom:4px; }
  .cap{ font-size:11px; color:var(--muted); margin-bottom:2px; text-align:left; }
  .inline{ display:grid; gap:2px; }
  /* ボタン行は上詰めでも見えるよう margin少なめ */
  .foot{ display:flex; gap:8px; flex-wrap:wrap; }
  .btn{ appearance:none; border:1px solid var(--border); background:#fff; padding:9px 12px; border-radius:12px; font-size:16px; }
  .btn.primary{ background:var(--brand); color:#fff; border-color:var(--brand); }
  .section{ margin-top:6px; padding-top:6px; border-top:1px dashed var(--border); }
  .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; white-space:pre-wrap; }
  @media (max-width:380px){
    .tire-row{ grid-template-columns: 42px 1fr 1fr 1fr; }
  }
</style>
</head>
<body>
<header>
  <h1>タイヤ点検</h1>
  <span id="now"></span>
</header>

<div class="wrap">
  <form id="form" class="card" onsubmit="return false;">
    <p class="title">車両情報</p>
    <div class="veh-rows">
      <div>
        <label>ステーション名
          <input type="text" name="station" required placeholder="例: タイムズ○○駅前第2">
        </label>
      </div>
      <div class="veh-row2">
        <div>
          <label>車種（モデル）
            <input type="text" name="model" required placeholder="例: ノート">
          </label>
        </div>
        <div>
          <label>フルナンバー
            <input type="text" name="plate_full" required maxlength="20" placeholder="例: 相模501ワ1234">
          </label>
        </div>
      </div>
      <div class="std-row">
        <div>
          <label>規定圧（前）kPa <span class="hint">任意</span>
            <input type="number" name="std_f" inputmode="numeric" placeholder="例: 260">
          </label>
        </div>
        <div>
          <label>規定圧（後）kPa <span class="hint">任意</span>
            <input type="number" name="std_r" inputmode="numeric" placeholder="例: 260">
          </label>
        </div>
      </div>
    </div>

    <p class="title section">タイヤ別入力</p>
    <div class="tire-list">
      <div class="tire-row">
        <div class="lab">RF</div>
        <div class="inline"><div class="cap">残溝 mm</div><input type="number" step="0.1" name="tread_rf" required></div>
        <div class="inline"><div class="cap">空気圧kPa</div><input type="number" step="1" name="pre_rf" required></div>
        <div class="inline"><div class="cap">製造年週</div><input type="text" pattern="\d{4}" maxlength="4" name="dot_rf" required placeholder="2421"></div>
      </div>
      <div class="tire-row">
        <div class="lab">LF</div>
        <div class="inline"><div class="cap">残溝 mm</div><input type="number" step="0.1" name="tread_lf" required></div>
        <div class="inline"><div class="cap">空気圧kPa</div><input type="number" step="1" name="pre_lf" required></div>
        <div class="inline"><div class="cap">製造年週</div><input type="text" pattern="\d{4}" maxlength="4" name="dot_lf" required></div>
      </div>
      <div class="tire-row">
        <div class="lab">LR</div>
        <div class="inline"><div class="cap">残溝 mm</div><input type="number" step="0.1" name="tread_lr" required></div>
        <div class="inline"><div class="cap">空気圧kPa</div><input type="number" step="1" name="pre_lr" required></div>
        <div class="inline"><div class="cap">製造年週</div><input type="text" pattern="\d{4}" maxlength="4" name="dot_lr" required></div>
      </div>
      <div class="tire-row">
        <div class="lab">RR</div>
        <div class="inline"><div class="cap">残溝 mm</div><input type="number" step="0.1" name="tread_rr" required></div>
        <div class="inline"><div class="cap">空気圧kPa</div><input type="number" step="1" name="pre_rr" required></div>
        <div class="inline"><div class="cap">製造年週</div><input type="text" pattern="\d{4}" maxlength="4" name="dot_rr" required></div>
      </div>
    </div>

    <div class="foot section">
      <button class="btn" type="reset">クリア</button>
      <button class="btn primary" id="submitBtn" type="submit">完了 → 結果表示</button>
    </div>
  </form>

  <div id="resultCard" class="card" style="display:none;">
    <p class="title">結果（メモ形式）</p>
    <div class="mono" id="res_header"></div>
    <div class="mono" id="res_lines"></div>
    <div class="foot section">
      <button class="btn" id="backBtn">入力に戻る</button>
      <button class="btn primary" id="copyBtn">表示をコピー</button>
    </div>
  </div>
</div>

<script>
function nowJST(){
  const d = new Date(); const utc = d.getTime()+d.getTimezoneOffset()*60000; const jst = new Date(utc+9*60*60000);
  const HH = String(jst.getHours()).padStart(2,'0'); const MM = String(jst.getMinutes()).padStart(2,'0');
  const mm = String(jst.getMonth()+1).padStart(2,'0'); const dd = String(jst.getDate()).padStart(2,'0');
  return mm+'/'+dd+' '+HH+':'+MM;
}
document.getElementById('now').textContent = nowJST();

const form = document.getElementById('form');
const resultCard = document.getElementById('resultCard');
const resHeader = document.getElementById('res_header');
const resLines = document.getElementById('res_lines');

form.addEventListener('submit', () => {
  const F = Object.fromEntries(new FormData(form).entries());
  const stdSuffix = (F.std_f && F.std_r) ? `    ${F.std_f}-${F.std_r}` : '';
  const lines = [
    `RF ${F.tread_rf} ${F.pre_rf} ${F.dot_rf}${stdSuffix}`,
    `LF ${F.tread_lf} ${F.pre_lf} ${F.dot_lf}`,
    `LR ${F.tread_lr} ${F.pre_lr} ${F.dot_lr}`,
    `RR ${F.tread_rr} ${F.pre_rr} ${F.dot_rr}`,
    '',
    nowJST()
  ].join('\n');
  resHeader.textContent = `${F.plate_full}\n${F.model}`;
  resLines.textContent = lines;
  form.style.display='none'; resultCard.style.display='block'; window.scrollTo({top:0,behavior:'smooth'});
});

document.getElementById('backBtn').addEventListener('click', () => {
  resultCard.style.display='none'; form.style.display='block'; window.scrollTo({top:0,behavior:'smooth'});
});
document.getElementById('copyBtn').addEventListener('click', async () => {
  const txt = (resHeader.textContent + '\n' + resLines.textContent).trim();
  try{ await navigator.clipboard.writeText(txt); const b=document.getElementById('copyBtn'); b.textContent='コピーしました'; setTimeout(()=>b.textContent='表示をコピー',1600);}catch(e){ alert('コピー失敗: '+e); }
});
</script>
</body>
</html>
